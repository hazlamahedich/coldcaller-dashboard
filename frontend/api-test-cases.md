# API Testing: POST /calls/start - Production Debugging

## Test Cases for Call Start Endpoint

### Valid Test Cases

#### Test 1: Valid International Phone Number
```bash
curl -X POST http://localhost:3001/api/calls/start \
  -H "Content-Type: application/json" \
  -d '{
    "phoneNumber": "+63 917 629 9291",
    "agentId": "agent-001",
    "campaignId": "campaign-001"
  }'
```

#### Test 2: Valid US Phone Number
```bash
curl -X POST http://localhost:3001/api/calls/start \
  -H "Content-Type: application/json" \
  -d '{
    "phoneNumber": "+1 555 123 4567",
    "leadId": 1,
    "agentId": "agent-002"
  }'
```

#### Test 3: E.164 Format
```bash
curl -X POST http://localhost:3001/api/calls/start \
  -H "Content-Type: application/json" \
  -d '{
    "phoneNumber": "+639176299291",
    "leadId": 2
  }'
```

### Invalid Test Cases (Should Return 400 with Error Details)

#### Test 4: Invalid Phone Number - Too Short
```bash
curl -X POST http://localhost:3001/api/calls/start \
  -H "Content-Type: application/json" \
  -d '{
    "phoneNumber": "+1 555",
    "agentId": "agent-003"
  }'
```

#### Test 5: Invalid Phone Number - Letters
```bash
curl -X POST http://localhost:3001/api/calls/start \
  -H "Content-Type: application/json" \
  -d '{
    "phoneNumber": "+1 555 ABC DEFG",
    "agentId": "agent-004"
  }'
```

#### Test 6: Missing Required Phone Number
```bash
curl -X POST http://localhost:3001/api/calls/start \
  -H "Content-Type: application/json" \
  -d '{
    "agentId": "agent-005",
    "campaignId": "campaign-002"
  }'
```

#### Test 7: Invalid Lead ID
```bash
curl -X POST http://localhost:3001/api/calls/start \
  -H "Content-Type: application/json" \
  -d '{
    "phoneNumber": "+1 555 987 6543",
    "leadId": "invalid-lead-id",
    "agentId": "agent-006"
  }'
```

#### Test 8: Empty Request Body
```bash
curl -X POST http://localhost:3001/api/calls/start \
  -H "Content-Type: application/json" \
  -d '{}'
```

## Expected Results

### Valid Cases:
- Status: 201 Created
- Response includes call object with generated ID
- SIP integration result included
- Call status: "connecting"

### Invalid Cases:
- Status: 400 Bad Request  
- Response includes validation error details
- Clear error messages for each validation failure

## Test Execution Results
(To be filled during testing)

---
Generated by Production Debugger Agent